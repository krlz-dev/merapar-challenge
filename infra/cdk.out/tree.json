{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.215.0"},"children":{"InfraStack":{"id":"InfraStack","path":"InfraStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.215.0"},"children":{"AstroVPC":{"id":"AstroVPC","path":"InfraStack/AstroVPC","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.215.0","metadata":[{"maxAzs":"*","natGateways":"*","subnetConfiguration":[{"cidrMask":"*","name":"*","subnetType":"Public"},{"cidrMask":"*","name":"*","subnetType":"Private"}]}]},"children":{"Resource":{"id":"Resource","path":"InfraStack/AstroVPC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"InfraStack/AstroVPC"}]}}},"publicSubnet1":{"id":"publicSubnet1","path":"InfraStack/AstroVPC/publicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.215.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{},{"addNatGateway":["*"]}]},"children":{"Subnet":{"id":"Subnet","path":"InfraStack/AstroVPC/publicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2a","cidrBlock":"10.0.0.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"InfraStack/AstroVPC/publicSubnet1"}],"vpcId":{"Ref":"AstroVPCAAA6DAC3"}}}},"Acl":{"id":"Acl","path":"InfraStack/AstroVPC/publicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"InfraStack/AstroVPC/publicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"InfraStack/AstroVPC/publicSubnet1"}],"vpcId":{"Ref":"AstroVPCAAA6DAC3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"InfraStack/AstroVPC/publicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"AstroVPCpublicSubnet1RouteTableBB3774FE"},"subnetId":{"Ref":"AstroVPCpublicSubnet1Subnet85A3F42D"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"InfraStack/AstroVPC/publicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"AstroVPCIGWFD286773"},"routeTableId":{"Ref":"AstroVPCpublicSubnet1RouteTableBB3774FE"}}}},"EIP":{"id":"EIP","path":"InfraStack/AstroVPC/publicSubnet1/EIP","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"InfraStack/AstroVPC/publicSubnet1"}]}}},"NATGateway":{"id":"NATGateway","path":"InfraStack/AstroVPC/publicSubnet1/NATGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["AstroVPCpublicSubnet1EIP93C8978B","AllocationId"]},"subnetId":{"Ref":"AstroVPCpublicSubnet1Subnet85A3F42D"},"tags":[{"key":"Name","value":"InfraStack/AstroVPC/publicSubnet1"}]}}}}},"publicSubnet2":{"id":"publicSubnet2","path":"InfraStack/AstroVPC/publicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.215.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]},"children":{"Subnet":{"id":"Subnet","path":"InfraStack/AstroVPC/publicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2b","cidrBlock":"10.0.1.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"InfraStack/AstroVPC/publicSubnet2"}],"vpcId":{"Ref":"AstroVPCAAA6DAC3"}}}},"Acl":{"id":"Acl","path":"InfraStack/AstroVPC/publicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"InfraStack/AstroVPC/publicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"InfraStack/AstroVPC/publicSubnet2"}],"vpcId":{"Ref":"AstroVPCAAA6DAC3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"InfraStack/AstroVPC/publicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"AstroVPCpublicSubnet2RouteTable99875A92"},"subnetId":{"Ref":"AstroVPCpublicSubnet2Subnet386394DA"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"InfraStack/AstroVPC/publicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"AstroVPCIGWFD286773"},"routeTableId":{"Ref":"AstroVPCpublicSubnet2RouteTable99875A92"}}}}}},"privateSubnet1":{"id":"privateSubnet1","path":"InfraStack/AstroVPC/privateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.215.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]},"children":{"Subnet":{"id":"Subnet","path":"InfraStack/AstroVPC/privateSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2a","cidrBlock":"10.0.2.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"InfraStack/AstroVPC/privateSubnet1"}],"vpcId":{"Ref":"AstroVPCAAA6DAC3"}}}},"Acl":{"id":"Acl","path":"InfraStack/AstroVPC/privateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"InfraStack/AstroVPC/privateSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"InfraStack/AstroVPC/privateSubnet1"}],"vpcId":{"Ref":"AstroVPCAAA6DAC3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"InfraStack/AstroVPC/privateSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"AstroVPCprivateSubnet1RouteTableF8319885"},"subnetId":{"Ref":"AstroVPCprivateSubnet1SubnetDF445A10"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"InfraStack/AstroVPC/privateSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"AstroVPCpublicSubnet1NATGatewayD101C9AF"},"routeTableId":{"Ref":"AstroVPCprivateSubnet1RouteTableF8319885"}}}}}},"privateSubnet2":{"id":"privateSubnet2","path":"InfraStack/AstroVPC/privateSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.215.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]},"children":{"Subnet":{"id":"Subnet","path":"InfraStack/AstroVPC/privateSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2b","cidrBlock":"10.0.3.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"InfraStack/AstroVPC/privateSubnet2"}],"vpcId":{"Ref":"AstroVPCAAA6DAC3"}}}},"Acl":{"id":"Acl","path":"InfraStack/AstroVPC/privateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"InfraStack/AstroVPC/privateSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"InfraStack/AstroVPC/privateSubnet2"}],"vpcId":{"Ref":"AstroVPCAAA6DAC3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"InfraStack/AstroVPC/privateSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"AstroVPCprivateSubnet2RouteTable2D06BB2D"},"subnetId":{"Ref":"AstroVPCprivateSubnet2Subnet775DBA2D"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"InfraStack/AstroVPC/privateSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"AstroVPCpublicSubnet1NATGatewayD101C9AF"},"routeTableId":{"Ref":"AstroVPCprivateSubnet2RouteTable2D06BB2D"}}}}}},"IGW":{"id":"IGW","path":"InfraStack/AstroVPC/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"InfraStack/AstroVPC"}]}}},"VPCGW":{"id":"VPCGW","path":"InfraStack/AstroVPC/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"AstroVPCIGWFD286773"},"vpcId":{"Ref":"AstroVPCAAA6DAC3"}}}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"InfraStack/AstroVPC/RestrictDefaultSecurityGroupCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.215.0","metadata":["*"]},"children":{"Default":{"id":"Default","path":"InfraStack/AstroVPC/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.215.0"}}}}}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"InfraStack/Custom::VpcRestrictDefaultSGCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.215.0"},"children":{"Staging":{"id":"Staging","path":"InfraStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"Role":{"id":"Role","path":"InfraStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.215.0"}},"Handler":{"id":"Handler","path":"InfraStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.215.0"}}}},"AstroRepository":{"id":"AstroRepository","path":"InfraStack/AstroRepository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.215.0","metadata":[{"repositoryName":"*","removalPolicy":"destroy","imageTagMutability":"MUTABLE","imageScanOnPush":true}]},"children":{"Resource":{"id":"Resource","path":"InfraStack/AstroRepository/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"imageScanningConfiguration":{"scanOnPush":true},"imageTagMutability":"MUTABLE","repositoryName":"astro-dynamic-text"}}}}},"AstroCluster":{"id":"AstroCluster","path":"InfraStack/AstroCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.215.0","metadata":[{"vpc":"*","clusterName":"*"}]},"children":{"Resource":{"id":"Resource","path":"InfraStack/AstroCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{"clusterName":"astro-dynamic-text-cluster"}}}}},"AstroLogGroup":{"id":"AstroLogGroup","path":"InfraStack/AstroLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*","removalPolicy":"destroy","retention":7}]},"children":{"Resource":{"id":"Resource","path":"InfraStack/AstroLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/astro-dynamic-text","retentionInDays":7}}}}},"AstroTaskDefinition":{"id":"AstroTaskDefinition","path":"InfraStack/AstroTaskDefinition","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.215.0","metadata":["*","*","*","*","*","*"]},"children":{"TaskRole":{"id":"TaskRole","path":"InfraStack/AstroTaskDefinition/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}}]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"InfraStack/AstroTaskDefinition/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"InfraStack/AstroTaskDefinition/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}}}},"Resource":{"id":"Resource","path":"InfraStack/AstroTaskDefinition/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::GetAtt":["AstroRepository95765926","Arn"]}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["AstroRepository95765926","Arn"]}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"AstroRepository95765926"},":latest"]]},"name":"AstroContainer","portMappings":[{"containerPort":4321,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"AstroLogGroup041FBF97"},"awslogs-stream-prefix":"astro","awslogs-region":"us-west-2"}},"environment":[{"name":"NODE_ENV","value":"production"},{"name":"HOST","value":"0.0.0.0"},{"name":"PORT","value":"4321"}],"healthCheck":{"command":["CMD-SHELL","wget --no-verbose --tries=1 --spider http://localhost:4321/ || exit 1"],"interval":30,"retries":3,"startPeriod":60,"timeout":5}}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["AstroTaskDefinitionExecutionRoleB29F2D3E","Arn"]},"family":"astro-dynamic-text","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["AstroTaskDefinitionTaskRoleA2FCE812","Arn"]}}}},"AstroContainer":{"id":"AstroContainer","path":"InfraStack/AstroTaskDefinition/AstroContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.215.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"InfraStack/AstroTaskDefinition/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"roleName":"*"},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"InfraStack/AstroTaskDefinition/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"InfraStack/AstroTaskDefinition/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"InfraStack/AstroTaskDefinition/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"InfraStack/AstroTaskDefinition/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":{"Fn::GetAtt":["AstroRepository95765926","Arn"]}},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["AstroLogGroup041FBF97","Arn"]}}],"Version":"2012-10-17"},"policyName":"AstroTaskDefinitionExecutionRoleDefaultPolicyE49EF834","roles":[{"Ref":"AstroTaskDefinitionExecutionRoleB29F2D3E"}]}}}}}}}}},"AstroService":{"id":"AstroService","path":"InfraStack/AstroService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs_patterns.ApplicationLoadBalancedFargateService","version":"2.215.0"},"children":{"LB":{"id":"LB","path":"InfraStack/AstroService/LB","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.215.0","metadata":["*","*"]},"children":{"Resource":{"id":"Resource","path":"InfraStack/AstroService/LB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["AstroServiceLBSecurityGroupE469ADAE","GroupId"]}],"subnets":[{"Ref":"AstroVPCpublicSubnet1Subnet85A3F42D"},{"Ref":"AstroVPCpublicSubnet2Subnet386394DA"}],"type":"application"}}},"SecurityGroup":{"id":"SecurityGroup","path":"InfraStack/AstroService/LB/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.215.0","metadata":[{"vpc":"*","description":"*","allowAllOutbound":false},{"addIngressRule":[{"canInlineRule":true,"connections":"*","uniqueId":"*"},{},"*",false]},{"addEgressRule":["*",{},"*",true]}]},"children":{"Resource":{"id":"Resource","path":"InfraStack/AstroService/LB/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB InfraStackAstroServiceLBFE73CC40","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow from anyone on port 80"}],"vpcId":{"Ref":"AstroVPCAAA6DAC3"}}}},"to InfraStackAstroServiceSecurityGroup54A2F680:4321":{"id":"to InfraStackAstroServiceSecurityGroup54A2F680:4321","path":"InfraStack/AstroService/LB/SecurityGroup/to InfraStackAstroServiceSecurityGroup54A2F680:4321","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["AstroServiceSecurityGroupD9B312E9","GroupId"]},"fromPort":4321,"groupId":{"Fn::GetAtt":["AstroServiceLBSecurityGroupE469ADAE","GroupId"]},"ipProtocol":"tcp","toPort":4321}}}}},"PublicListener":{"id":"PublicListener","path":"InfraStack/AstroService/LB/PublicListener","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.215.0","metadata":["*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"InfraStack/AstroService/LB/PublicListener/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"AstroServiceLBPublicListenerECSGroupE14FCBD0"}}],"loadBalancerArn":{"Ref":"AstroServiceLB3F27AF6E"},"port":80,"protocol":"HTTP"}}},"ECSGroup":{"id":"ECSGroup","path":"InfraStack/AstroService/LB/PublicListener/ECSGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.215.0"},"children":{"Resource":{"id":"Resource","path":"InfraStack/AstroService/LB/PublicListener/ECSGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/","healthCheckTimeoutSeconds":5,"healthyThresholdCount":2,"matcher":{"httpCode":"200"},"port":80,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","unhealthyThresholdCount":3,"vpcId":{"Ref":"AstroVPCAAA6DAC3"}}}}}}}}}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"InfraStack/AstroService/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.215.0"}},"ServiceURL":{"id":"ServiceURL","path":"InfraStack/AstroService/ServiceURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.215.0"}},"Service":{"id":"Service","path":"InfraStack/AstroService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.215.0","metadata":["*"]},"children":{"Service":{"id":"Service","path":"InfraStack/AstroService/Service/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"AstroCluster4F1F2D92"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":120,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"AstroServiceLBPublicListenerECSGroupE14FCBD0"},"containerName":"AstroContainer","containerPort":4321}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"AstroVPCprivateSubnet1SubnetDF445A10"},{"Ref":"AstroVPCprivateSubnet2Subnet775DBA2D"}],"securityGroups":[{"Fn::GetAtt":["AstroServiceSecurityGroupD9B312E9","GroupId"]}]}},"platformVersion":"LATEST","serviceName":"astro-dynamic-text-service","taskDefinition":{"Ref":"AstroTaskDefinitionCCCF6C83"}}}},"SecurityGroup":{"id":"SecurityGroup","path":"InfraStack/AstroService/Service/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.215.0","metadata":[{"vpc":"*"},{"addIngressRule":["*",{},"*",false]}]},"children":{"Resource":{"id":"Resource","path":"InfraStack/AstroService/Service/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"InfraStack/AstroService/Service/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"AstroVPCAAA6DAC3"}}}},"from InfraStackAstroServiceLBSecurityGroup9051AC96:4321":{"id":"from InfraStackAstroServiceLBSecurityGroup9051AC96:4321","path":"InfraStack/AstroService/Service/SecurityGroup/from InfraStackAstroServiceLBSecurityGroup9051AC96:4321","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":4321,"groupId":{"Fn::GetAtt":["AstroServiceSecurityGroupD9B312E9","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["AstroServiceLBSecurityGroupE469ADAE","GroupId"]},"toPort":4321}}}}}}}}},"AstroDistribution":{"id":"AstroDistribution","path":"InfraStack/AstroDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.215.0","metadata":[{"defaultBehavior":{"origin":"*","viewerProtocolPolicy":"redirect-to-https","allowedMethods":"*","cachedMethods":"*","cachePolicy":"*","originRequestPolicy":"*"},"additionalBehaviors":"*"},{"addBehavior":["*",{},{"viewerProtocolPolicy":"redirect-to-https","allowedMethods":"*","cachePolicy":"*","originRequestPolicy":"*"}]},{"addBehavior":["*",{},{"viewerProtocolPolicy":"redirect-to-https","allowedMethods":"*","cachePolicy":"*","originRequestPolicy":"*"}]}]},"children":{"Origin1":{"id":"Origin1","path":"InfraStack/AstroDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin2":{"id":"Origin2","path":"InfraStack/AstroDistribution/Origin2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin3":{"id":"Origin3","path":"InfraStack/AstroDistribution/Origin3","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"InfraStack/AstroDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["AstroServiceLB3F27AF6E","DNSName"]},"id":"InfraStackAstroDistributionOrigin1AA2E926A","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"http-only"}},{"domainName":{"Fn::GetAtt":["AstroServiceLB3F27AF6E","DNSName"]},"id":"InfraStackAstroDistributionOrigin2916B0FA5","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"http-only"}},{"domainName":{"Fn::GetAtt":["AstroServiceLB3F27AF6E","DNSName"]},"id":"InfraStackAstroDistributionOrigin3F9E5D6EA","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"http-only"}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"InfraStackAstroDistributionOrigin1AA2E926A","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachedMethods":["GET","HEAD","OPTIONS"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"88a5eaf4-2fd4-4709-b370-b4c650ea3fcf","viewerProtocolPolicy":"redirect-to-https"},"cacheBehaviors":[{"pathPattern":"/events","targetOriginId":"InfraStackAstroDistributionOrigin2916B0FA5","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"88a5eaf4-2fd4-4709-b370-b4c650ea3fcf","viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"/update/*","targetOriginId":"InfraStackAstroDistributionOrigin3F9E5D6EA","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"88a5eaf4-2fd4-4709-b370-b4c650ea3fcf","viewerProtocolPolicy":"redirect-to-https"}],"httpVersion":"http2","ipv6Enabled":true}}}}}},"ECRRepository":{"id":"ECRRepository","path":"InfraStack/ECRRepository","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.215.0"}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"InfraStack/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.215.0"}},"CloudFrontURL":{"id":"CloudFrontURL","path":"InfraStack/CloudFrontURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.215.0"}},"ClusterName":{"id":"ClusterName","path":"InfraStack/ClusterName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.215.0"}},"ServiceName":{"id":"ServiceName","path":"InfraStack/ServiceName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.215.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"InfraStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"InfraStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.215.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"InfraStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.215.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"InfraStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.215.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}